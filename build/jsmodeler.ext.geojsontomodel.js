/* JSModeler 0.42 - http://www.github.com/kovacsv/JSModeler */ 'use strict';JSM.ConvertGeoJsonToModel=function(l,v,w,x){function n(e,a){return JSM.SphericalToCartesian(e+0.005*e,(90-a.y)*JSM.DegRad,a.x*JSM.DegRad)}function s(e,a){var d=parseInt(e/a,10);0===d&&(d=1);return d}function y(e,a,d,b,c,f){function g(b,a,e,d){function f(a,b,e){var d=[],c,g;for(c=0;c<b.length;c++)g=b[c],d.push(JSM.AddVertexToBody(a,g.x,g.y,g.z));e?(b=d.slice(0),b.reverse(),JSM.AddPolygonToBody(a,b)):JSM.AddPolygonToBody(a,d);return d}function g(b,a,e){var d=a.length,c,f,h,k,m;for(c=0;c<
d;c++)f=a[c],h=a[JSM.NextIndex(c,d)],k=e[c],m=e[JSM.NextIndex(c,d)],JSM.AddPolygonToBody(b,[f,h,m,k])}var c=[],h=[],k,l,m;for(k=0;k<a.VertexCount();k++){l=a.GetVertex(k);m=n(e,l);if(0<c.length){if(c[c.length-1].IsEqualWithEps(m,0.001))continue;if(k==a.VertexCount()-1&&c[0].IsEqualWithEps(m,0.001))continue}c.push(m);JSM.IsZero(d)||h.push(n(e-d,l))}3<=c.length&&(a=f(b,c,!0),0!==h.length&&(h=f(b,h,!1),g(b,a,h)))}var k=c.GetBoundingBox(),h=s(k.max.x-k.min.x,b);b=s(k.max.y-k.min.y,b);c=JSM.SegmentPolygon2D(c,
h,b);for(h=0;h<c.length;h++)g(e,c[h],a,d);e.SetPolygonsMaterialIndex(f)}function t(e,a,d,b,c){var f=new JSM.Body;m.AddBody(f);var g=new JSM.ContourPolygon2D,k,h,l,n;for(k=0;k<b.length;k++){g.AddContour();l=b[k];for(h=0;h<l.length-1;h++)n=JSM.CoordFromArray2D(l[h]),g.AddVertexCoord(n)}g.GetOrientation()!=JSM.Orientation.Clockwise&&g.ReverseVertices();b=JSM.ConvertContourPolygonToPolygon2D(g);y(f,e,a,d,b,c)}function z(e,a,d,b){if(!b.type||"Feature"!=b.type||!b.geometry||!b.geometry.type||!b.geometry.coordinates)return!1;
var c=JSM.RandomInt(0,16777215),f=new JSM.Material({ambient:c,diffuse:c,singleSided:!0}),c=m.AddMaterial(f);if("Point"==b.geometry.type)f.pointSize=10,a=b.geometry.coordinates,null===p&&(p=new JSM.Body,m.AddBody(p)),d=JSM.CoordFromArray2D(a),a=p,e=n(e,d),e=JSM.AddVertexToBody(a,e.x,e.y,e.z),e=JSM.AddPointToBody(a,e),a.GetPoint(e).SetMaterialIndex(c);else if("LineString"==b.geometry.type){d=b.geometry.coordinates;null===q&&(q=new JSM.Body,m.AddBody(q));var f=JSM.CoordFromArray2D(d[0]),g=JSM.CoordFromArray2D(d[1]);
d=q;b=new JSM.Sector2D(f,g);f=f.DistanceTo(g);a=s(f,a);b=JSM.GetSectorSegmentation2D(b,a);f=d.LineCount();for(a=0;a<b.length;a++)g=n(e,b[a]),g=JSM.AddVertexToBody(d,g.x,g.y,g.z),0<a&&JSM.AddLineToBody(d,g-1,g);for(a=f;a<d.LineCount();a++)e=d.GetLine(a),e.SetMaterialIndex(c)}else if("Polygon"==b.geometry.type)t(e,d,a,b.geometry.coordinates,c);else if("MultiPolygon"==b.geometry.type){b=b.geometry.coordinates;for(f=0;f<b.length;f++)t(e,d,a,b[f],c)}}if(!l.type||"FeatureCollection"!=l.type||!l.features)return null;
var m=new JSM.Model,p=null,q=null,r,u;for(r=0;r<l.features.length;r++)u=l.features[r],z(v,w,x,u);return m};
