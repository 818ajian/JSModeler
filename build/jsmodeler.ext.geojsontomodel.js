/* JSModeler 0.42 - http://www.github.com/kovacsv/JSModeler */ 'use strict';JSM.ConvertGeoJsonToModel=function(m,y,z,A){function q(b,c){return JSM.SphericalToCartesian(b+0.005*b,(90-c.y)*JSM.DegRad,c.x*JSM.DegRad)}function s(b,c){var f=parseInt(b/c,10);0===f&&(f=1);return f}function B(b,c,f,h,k,a){function d(a,b,c,e){function f(a,b,c){var e=[],d,g;for(d=0;d<b.length;d++)g=b[d],e.push(JSM.AddVertexToBody(a,g.x,g.y,g.z));c?(b=e.slice(0),b.reverse(),JSM.AddPolygonToBody(a,b)):JSM.AddPolygonToBody(a,e);return e}function l(b,a,c){var e=a.length,d,g,f,h,k;for(d=0;d<
e;d++)g=a[d],f=a[JSM.NextIndex(d,e)],h=c[d],k=c[JSM.NextIndex(d,e)],JSM.AddPolygonToBody(b,[g,f,k,h])}var d=[],h=[],k,m,p;for(k=0;k<b.VertexCount();k++){m=b.GetVertex(k);p=q(c,m);if(0<d.length){if(d[d.length-1].IsEqualWithEps(p,0.001))continue;if(k==b.VertexCount()-1&&d[0].IsEqualWithEps(p,0.001))continue}d.push(p);JSM.IsZero(e)||h.push(q(c-e,m))}3<=d.length&&(b=f(a,d,!0),0!==h.length&&(h=f(a,h,!1),l(a,b,h)))}var e=k.GetBoundingBox(),l=s(e.max.x-e.min.x,h);h=s(e.max.y-e.min.y,h);k=JSM.SegmentPolygon2D(k,
l,h);for(l=0;l<k.length;l++)d(b,k[l],c,f);b.SetPolygonsMaterialIndex(a)}function t(b,c,f,h){f=JSM.CoordFromArray2D(f);c=q(c,f);c=JSM.AddVertexToBody(b,c.x,c.y,c.z);c=JSM.AddPointToBody(b,c);b.GetPoint(c).SetMaterialIndex(h)}function u(b,c,f,h,k){var a,d,e;for(a=0;a<f.length-1;a++){d=JSM.CoordFromArray2D(f[a]);e=JSM.CoordFromArray2D(f[a+1]);var l=b,r=c,g=d,m=e,n=h;e=k;d=new JSM.Sector2D(g,m);g=g.DistanceTo(m);g=s(g,n);m=JSM.GetSectorSegmentation2D(d,g);d=l.LineCount();n=n=g=void 0;for(g=0;g<m.length;g++)n=
q(r,m[g]),n=JSM.AddVertexToBody(l,n.x,n.y,n.z),0<g&&JSM.AddLineToBody(l,n-1,n);r=void 0;for(g=d;g<l.LineCount();g++)r=l.GetLine(g),r.SetMaterialIndex(e)}}function v(b,c,f,h,k,a){var d=new JSM.ContourPolygon2D,e,l,m,g;for(e=0;e<k.length;e++){d.AddContour();m=k[e];for(l=0;l<m.length-1;l++)g=JSM.CoordFromArray2D(m[l]),d.AddVertexCoord(g)}d.GetOrientation()!=JSM.Orientation.Clockwise&&d.ReverseVertices();k=JSM.ConvertContourPolygonToPolygon2D(d);B(b,c,f,h,k,a)}function C(b,c,f,h,k,a){function d(a){var b=
new JSM.Body;a.AddBody(b);return b}if(!a.type||"Feature"!=a.type||!a.geometry||!a.geometry.type||!a.geometry.coordinates)return!1;var e=JSM.RandomInt(0,16777215),l=new JSM.Material({ambient:e,diffuse:e,singleSided:!0}),e=b.AddMaterial(l);if("Point"==a.geometry.type||"MultiPoint"==a.geometry.type)if(null===c.pointsBody&&(c.pointsBody=d(b)),l.pointSize=10,"Point"==a.geometry.type)t(c.pointsBody,f,a.geometry.coordinates,e);else{if("MultiPoint"==a.geometry.type)for(b=0;b<a.geometry.coordinates.length;b++)t(c.pointsBody,
f,a.geometry.coordinates[b],e)}else if("LineString"==a.geometry.type||"MultiLineString"==a.geometry.type)if(null===c.linesBody&&(c.linesBody=d(b)),"LineString"==a.geometry.type)u(c.linesBody,f,a.geometry.coordinates,h,e);else{if("MultiLineString"==a.geometry.type)for(b=0;b<a.geometry.coordinates.length;b++)u(c.linesBody,f,a.geometry.coordinates[b],h,e)}else if("Polygon"==a.geometry.type||"MultiPolygon"==a.geometry.type)if(c=d(b),"Polygon"==a.geometry.type)v(c,f,k,h,a.geometry.coordinates,e);else if("MultiPolygon"==
a.geometry.type)for(b=0;b<a.geometry.coordinates.length;b++)v(c,f,k,h,a.geometry.coordinates[b],e)}if(!m.type||"FeatureCollection"!=m.type||!m.features)return null;var w=new JSM.Model,D={pointsBody:null,linesBody:null},p,x;for(p=0;p<m.features.length;p++)x=m.features[p],C(w,D,y,z,A,x);return w};
