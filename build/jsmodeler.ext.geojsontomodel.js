/* JSModeler 0.42 - http://www.github.com/kovacsv/JSModeler */ 'use strict';JSM.ConvertGeoJsonToModel=function(l,z,A,B){function q(c,e){return JSM.SphericalToCartesian(c+0.005*c,(90-e.y)*JSM.DegRad,e.x*JSM.DegRad)}function u(c,e){var f=parseInt(c/e,10);0===f&&(f=1);return f}function C(c,e,f,b,a,g){function k(b,a,c,e){function g(b,a,c){var e=[],d,f;for(d=0;d<a.length;d++)f=a[d],e.push(JSM.AddVertexToBody(b,f.x,f.y,f.z));c?(a=e.slice(0),a.reverse(),JSM.AddPolygonToBody(b,a)):JSM.AddPolygonToBody(b,e);return e}function m(b,a,c){var e=a.length,d,f,g,h,k;for(d=0;d<
e;d++)f=a[d],g=a[JSM.NextIndex(d,e)],h=c[d],k=c[JSM.NextIndex(d,e)],JSM.AddPolygonToBody(b,[f,g,k,h])}var d=[],f=[],k,l,p;for(k=0;k<a.VertexCount();k++){l=a.GetVertex(k);p=q(c,l);if(0<d.length){if(d[d.length-1].IsEqualWithEps(p,0.001))continue;if(k==a.VertexCount()-1&&d[0].IsEqualWithEps(p,0.001))continue}d.push(p);JSM.IsZero(e)||f.push(q(c-e,l))}3<=d.length&&(a=g(b,d,!0),0!==f.length&&(f=g(b,f,!1),m(b,a,f)))}var m=a.GetBoundingBox(),d=u(m.max.x-m.min.x,b);b=u(m.max.y-m.min.y,b);a=JSM.SegmentPolygon2D(a,
d,b);for(d=0;d<a.length;d++)k(c,a[d],e,f);c.SetPolygonsMaterialIndex(g)}function v(c,e,f){null===r&&(r=new JSM.Body,p.AddBody(r));var b=JSM.CoordFromArray2D(e);e=r;c=q(c,b);c=JSM.AddVertexToBody(e,c.x,c.y,c.z);c=JSM.AddPointToBody(e,c);e.GetPoint(c).SetMaterialIndex(f)}function w(c,e,f,b){null===s&&(s=new JSM.Body,p.AddBody(s));var a,g,k;for(a=0;a<e.length-1;a++){g=JSM.CoordFromArray2D(e[a]);k=JSM.CoordFromArray2D(e[a+1]);var m=s,d=c,h=g,l=k,n=f;k=b;g=new JSM.Sector2D(h,l);h=h.DistanceTo(l);h=u(h,
n);l=JSM.GetSectorSegmentation2D(g,h);g=m.LineCount();n=n=h=void 0;for(h=0;h<l.length;h++)n=q(d,l[h]),n=JSM.AddVertexToBody(m,n.x,n.y,n.z),0<h&&JSM.AddLineToBody(m,n-1,n);d=void 0;for(h=g;h<m.LineCount();h++)d=m.GetLine(h),d.SetMaterialIndex(k)}}function x(c,e,f,b,a){var g=new JSM.Body;p.AddBody(g);var k=new JSM.ContourPolygon2D,m,d,h,l;for(m=0;m<b.length;m++){k.AddContour();h=b[m];for(d=0;d<h.length-1;d++)l=JSM.CoordFromArray2D(h[d]),k.AddVertexCoord(l)}k.GetOrientation()!=JSM.Orientation.Clockwise&&
k.ReverseVertices();b=JSM.ConvertContourPolygonToPolygon2D(k);C(g,c,e,f,b,a)}function D(c,e,f,b){if(!b.type||"Feature"!=b.type||!b.geometry||!b.geometry.type||!b.geometry.coordinates)return!1;var a,g=JSM.RandomInt(0,16777215);a=new JSM.Material({ambient:g,diffuse:g,singleSided:!0});g=p.AddMaterial(a);if("Point"==b.geometry.type)a.pointSize=10,v(c,b.geometry.coordinates,g);else if("MultiPoint"==b.geometry.type){a.pointSize=10;for(a=0;a<b.geometry.coordinates.length;a++)v(c,b.geometry.coordinates[a],
g)}else if("LineString"==b.geometry.type)w(c,b.geometry.coordinates,e,g);else if("MultiLineString"==b.geometry.type)for(a=0;a<b.geometry.coordinates.length;a++)w(c,b.geometry.coordinates[a],e,g);else if("Polygon"==b.geometry.type)x(c,f,e,b.geometry.coordinates,g);else if("MultiPolygon"==b.geometry.type)for(a=0;a<b.geometry.coordinates.length;a++)x(c,f,e,b.geometry.coordinates[a],g)}if(!l.type||"FeatureCollection"!=l.type||!l.features)return null;var p=new JSM.Model,r=null,s=null,t,y;for(t=0;t<l.features.length;t++)y=
l.features[t],D(z,A,B,y);return p};
